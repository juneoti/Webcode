<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
</head>
<body>
    <h2>회원가입</h2>
    <form id="signup-form">
        <!-- 아이디 입력 -->
        <div>
            <label for="username">아이디</label>
            <input type="text" id="username" placeholder="아이디를 입력하세요">
            <small id="username-feedback"></small>
        </div>

        <!-- 비밀번호 입력 -->
        <div>
            <label for="password">비밀번호</label>
            <input type="password" id="password" placeholder="비밀번호를 입력하세요">
            <small id="password-feedback"></small>
        </div>

        <!-- 비밀번호 재확인 입력 -->
        <div>
            <label for="confirm-password">비밀번호 확인</label>
            <input type="password" id="confirm-password" placeholder="비밀번호를 다시 입력하세요">
            <small id="confirm-password-feedback"></small>
        </div>

        <button type="submit">회원가입</button>
    </form>

    <script>
        // 아이디 유효성 검사
        const usernameInput = document.getElementById('username');
        const usernameFeedback = document.getElementById('username-feedback');
        
        usernameInput.addEventListener('input', function () {
            const usernameRegex = /^[a-z0-9_-]{5,20}$/;  // 영문 소문자, 숫자, _와 -만 사용 가능
            const usernameValue = usernameInput.value;

            if (usernameValue === '') {
                usernameFeedback.textContent = '필수 입력입니다.';
                usernameFeedback.style.color = 'red';
            } else if (!usernameRegex.test(usernameValue)) {
                usernameFeedback.textContent = '5~20자의 영문 소문자, 숫자와 특수기호(_), (-)만 사용 가능합니다.';
                usernameFeedback.style.color = 'red';
            } else {
                usernameFeedback.textContent = '멋진 아이디네요!';
                usernameFeedback.style.color = 'green';
            }
        });

        // 비밀번호 유효성 검사
        const passwordInput = document.getElementById('password');
        const passwordFeedback = document.getElementById('password-feedback');
        
        passwordInput.addEventListener('input', function () {
            const passwordRegex = /^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_-]).{8,16}$/; // 대소문자, 숫자, 특수문자 모두 포함
            const passwordValue = passwordInput.value;

            if (passwordValue === '') {
                passwordFeedback.textContent = '필수 입력입니다.';
                passwordFeedback.style.color = 'red';
            } else if (!passwordRegex.test(passwordValue)) {
                passwordFeedback.textContent = '8~16자 영문 대/소문자, 숫자, 특수문자를 모두 포함하세요.';
                passwordFeedback.style.color = 'red';
            } else {
                passwordFeedback.textContent = '가능한 비밀번호';
                passwordFeedback.style.color = 'green';
            }
        });

        // 비밀번호 확인 유효성 검사
        const confirmPasswordInput = document.getElementById('confirm-password');
        const confirmPasswordFeedback = document.getElementById('confirm-password-feedback');
        
        confirmPasswordInput.addEventListener('input', function () {
            const confirmPasswordValue = confirmPasswordInput.value;
            const passwordValue = passwordInput.value;

            if (confirmPasswordValue === '') {
                confirmPasswordFeedback.textContent = '';
            } else if (confirmPasswordValue === passwordValue) {
                confirmPasswordFeedback.textContent = '비밀번호 일치';
                confirmPasswordFeedback.style.color = 'green';
            } else {
                confirmPasswordFeedback.textContent = '비밀번호 불일치';
                confirmPasswordFeedback.style.color = 'red';
            }
        });

        // 폼 제출 시 유효성 검사
        const form = document.getElementById('signup-form');
        form.addEventListener('submit', function (event) {
            event.preventDefault(); // 기본 제출 이벤트 방지

            // 각 항목의 유효성 체크
            const usernameValue = usernameInput.value;
            const passwordValue = passwordInput.value;
            const confirmPasswordValue = confirmPasswordInput.value;

            if (usernameValue === '' || !/^[a-z0-9_-]{5,20}$/.test(usernameValue)) {
                alert('아이디가 유효하지 않습니다.');
                return;
            }

            if (passwordValue === '' || !/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_-]).{8,16}$/.test(passwordValue)) {
                alert('비밀번호가 유효하지 않습니다.');
                return;
            }

            if (confirmPasswordValue !== passwordValue) {
                alert('비밀번호가 일치하지 않습니다.');
                return;
            }

            alert('회원가입 성공!');
            // 실제 서버에 폼 데이터를 전송하는 코드를 추가해야 함
        });
    </script>
</body>
</html>
